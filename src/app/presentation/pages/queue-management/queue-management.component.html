<p-menubar [model]="items">
  <ng-template pTemplate="start"> </ng-template>
  <ng-template pTemplate="item" let-item let-root="root">
    <a pRipple class="flex align-items-center p-menuitem-link">
      <span [class]="item.icon"></span>
      <span class="ml-2">{{ item.label }}</span>
    </a>
  </ng-template>
  <ng-template pTemplate="end">
    <profile />
  </ng-template>
</p-menubar>

<div style="height: calc(100% - 3.5rem); display: flex; flex-direction: column">
  <div class="grid grid-nogutter nested-grid" style="flex: 1">
    <div class="col-12 md:col-9">
      <div class="grid">
        <div class="col-12">
          <div class="text-center border-round-sm border-1">
            <p class="font-bold text-sm md:text-6xl">ARC0002</p>
          </div>
        </div>
        <div class="col-12">
          <div class="border-round">
            <p-table
              [value]="requests()"
              styleClass="w-full"
              class="w-full"
              [scrollable]="true"
              scrollHeight="400px"
            >
              <ng-template pTemplate="caption">
                <span>LISTADO DE SOLICITUDES</span>
              </ng-template>
              <ng-template pTemplate="header">
                <tr>
                  <th>Nro.</th>
                  <th>Codigo</th>
                  <th>Servicio</th>
                  <th>Estado</th>
                  <th>Fecha</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-request let-rowIndex="rowIndex">
                <tr>
                  <td>{{ rowIndex + 1 }}</td>
                  <td>{{ request.code }}</td>
                  <td>{{ request.service.name }}</td>
                  <td>
                    @switch (request.status) { @case ('pending') {
                    <p-tag severity="warning" value="PENDIENTE" />
                    } @case ('attended') {
                    <p-tag severity="success" value="ATENDIDO" />
                    } @case ('absent') {
                    <p-tag severity="danger" value="AUSENTE" />
                    } @case ('servicing') {
                    <p-tag severity="info" value="EN ATENCION" />
                    } @default {
                    <p-tag severity="contrast" value="Desconocido" />
                    } }
                  </td>
                  <td>{{ request.createdAt | date : "shortTime" }}</td>
                </tr>
              </ng-template>
              <ng-template pTemplate="emptymessage">
                <tr>
                  <td colspan="5">SIN SOLI</td>
                </tr>
              </ng-template>
              <ng-template pTemplate="summary">
                <span> EN COLA: {{ requests().length }}</span>
              </ng-template>
            </p-table>
          </div>
        </div>
      </div>
    </div>
    <div class="col-12 md:col-3">
      <div class="h-full p-3 border-1">
        <div
          class="flex flex-column justify-content-center flex-wrap row-gap-2"
        >
          <div
            class="flex align-items-center border-1 justify-content-center h-4rem m-2"
          >
            <p-button
              label="Siguiente ficha"
              icon="pi pi-angle-double-right"
              size="large"
              styleClass="w-full"
              class="w-full"
              [rounded]="true"
              (onClick)="next()"
            />
          </div>
          <div
            class="flex align-items-center justify-content-center h-4rem m-2"
          >
            <p-button
              label="Llamar"
              icon="pi pi-volume-up"
              size="large"
              styleClass="w-full"
              class="w-full"
              [rounded]="true"
            />
          </div>
          <div
            class="flex align-items-center justify-content-center h-4rem m-2"
          >
            3
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
